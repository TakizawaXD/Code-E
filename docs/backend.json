
{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user in the Code-E platform.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The full name of the user."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        },
        "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "The timestamp of when the user was created."
        }
      },
      "required": [ "name", "email", "createdAt" ]
    },
    "Course": {
      "title": "Course",
      "type": "object",
      "description": "Represents a course offered on the Code-E platform.",
      "properties": {
        "title": { "type": "string" },
        "description": { "type": "string" },
        "instructor": { "type": "string" },
        "instructorAvatarUrl": { "type": "string", "format": "uri" },
        "imageUrl": { "type": "string", "format": "uri" },
        "pathId": { "type": "string" }
      },
      "required": [ "title", "description", "instructor", "instructorAvatarUrl", "imageUrl", "pathId" ]
    },
    "LearningPath": {
      "title": "LearningPath",
      "type": "object",
      "description": "Represents a learning path that categorizes courses.",
      "properties": {
        "title": { "type": "string" },
        "description": { "type": "string" }
      },
      "required": [ "title", "description" ]
    },
    "CourseModule": {
      "title": "CourseModule",
      "type": "object",
      "description": "Represents a module within a course.",
      "properties": {
        "title": { "type": "string" },
        "order": { "type": "number" }
      },
      "required": [ "title", "order" ]
    },
    "Lesson": {
      "title": "Lesson",
      "type": "object",
      "description": "Represents a lesson within a course.",
      "properties": {
        "title": { "type": "string" },
        "duration": { "type": "string" },
        "difficulty": { "type": "string", "enum": ["Fácil", "Medio", "Difícil"] },
        "content": { "type": "string" },
        "order": { "type": "number" }
      },
      "required": [ "title", "duration", "difficulty", "content", "order" ]
    },
    "Progress": {
      "title": "Progress",
      "type": "object",
      "description": "Represents a user's progress in a course.",
      "properties": {
        "courseId": { "type": "string" },
        "completedLessons": { "type": "array", "items": { "type": "string" } },
        "completed": { "type": "boolean" }
      },
      "required": [ "courseId", "completedLessons", "completed" ]
    },
    "Comment": {
        "title": "Comment",
        "type": "object",
        "description": "Represents a user comment on a lesson.",
        "properties": {
            "userId": { "type": "string" },
            "userName": { "type": "string" },
            "userAvatarUrl": { "type": "string", "format": "uri" },
            "text": { "type": "string" },
            "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": [ "userId", "userName", "text", "createdAt" ]
    },
    "Notification": {
      "title": "Notification",
      "type": "object",
      "description": "Represents a notification for a user.",
      "properties": {
        "title": { "type": "string" },
        "description": { "type": "string" },
        "date": { "type": "string", "format": "date-time" }
      },
      "required": ["title", "description", "date"]
    },
    "GamificationStats": {
      "title": "GamificationStats",
      "type": "object",
      "description": "Tracks a user's points and study streaks.",
      "properties": {
        "points": { "type": "number" },
        "currentStreak": { "type": "number" },
        "longestStreak": { "type": "number" },
        "lastStudiedDate": { "type": "string", "format": "date-time" }
      },
      "required": ["points", "currentStreak", "longestStreak"]
    },
    "Badge": {
      "title": "Badge",
      "type": "object",
      "description": "Represents an unlockable achievement.",
      "properties": {
        "title": { "type": "string" },
        "description": { "type": "string" },
        "icon": { "type": "string" }
      },
      "required": ["title", "description", "icon"]
    },
    "UserBadge": {
      "title": "UserBadge",
      "type": "object",
      "description": "Links a user to a badge they have earned.",
      "properties": {
        "userId": { "type": "string" },
        "badgeId": { "type": "string" },
        "earnedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "badgeId", "earnedAt"]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "/learningPaths/{learningPathId}": {
      "schema": { "$ref": "#/entities/LearningPath" },
      "description": "Stores all learning paths."
    },
    "/courses/{courseId}": {
      "schema": { "$ref": "#/entities/Course" },
      "description": "Stores all courses."
    },
    "/courses/{courseId}/modules/{moduleId}": {
      "schema": { "$ref": "#/entities/CourseModule" },
      "description": "Stores modules for a specific course."
    },
    "/courses/{courseId}/modules/{moduleId}/lessons/{lessonId}": {
      "schema": { "$ref": "#/entities/Lesson" },
      "description": "Stores lessons for a specific module."
    },
    "/courses/{courseId}/modules/{moduleId}/lessons/{lessonId}/comments/{commentId}": {
        "schema": { "$ref": "#/entities/Comment" },
        "description": "Stores comments for a specific lesson."
    },
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores user profile information."
    },
    "/users/{userId}/progress/{progressId}": {
      "schema": { "$ref": "#/entities/Progress" },
      "description": "Tracks a user's progress in courses."
    },
    "/users/{userId}/notifications/{notificationId}": {
        "schema": { "$ref": "#/entities/Notification" },
        "description": "Stores notifications for a user."
    },
    "/users/{userId}/gamification/{statsId}": {
        "schema": { "$ref": "#/entities/GamificationStats" },
        "description": "Stores a user's gamification stats. Should be a single doc."
    },
    "/badges/{badgeId}": {
        "schema": { "$ref": "#/entities/Badge" },
        "description": "Stores all available badges in the platform."
    },
    "/users/{userId}/badges/{userBadgeId}": {
        "schema": { "$ref": "#/entities/UserBadge" },
        "description": "Stores the badges a user has earned."
    }
  }
}
